<audio id="bg-music" src="res/song.mp3"></audio>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Nemo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ffe6f0, #ffb3ba, #ffcccc);
            color: #333;
            overflow-x: hidden;
        }

        .container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero {
            text-align: center;
            padding: 100px 20px;
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 50px;
            position: relative;
        }

        .hero img {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }

        .hero h1 {
            font-size: 3em;
            margin: 0;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.2em;
            color: #fff;
            margin: 10px 0;
        }

        .section {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 50px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1s ease-in;
        }

        .section h2 {
            color: #ff6b9d;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .section .photos {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .section img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .compliments {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .compliment {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .compliment:hover {
            transform: scale(1.05);
        }

        .proposal {
            text-align: center;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .proposal h2 {
            font-size: 2.5em;
            color: #fff;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .proposal p {
            font-size: 1.2em;
            color: #fff;
            margin-bottom: 30px;
        }

        .section.center-img img {
            display: block;
            margin: 0 auto 20px auto;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 100px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-width: 150px;
        }

        #yes-btn {
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            color: white;
        }

        #yes-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        #no-btn {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            position: relative;
        }

        #no-btn:hover {
            transform: scale(1.1);
        }

        .final-page {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: auto;
            height: auto;
            min-height: 100vh;
            overflow-y: auto;
            background: linear-gradient(135deg, #ffe6f0, #ffb3ba);
            z-index: 5000;
            text-align: center;
            padding: 100px 20px;
            animation: fadeIn 1s ease-in;
        }

        .final-page h1 {
            font-size: 3em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .final-page p {
            font-size: 1.5em;
            color: #fff;
            margin: 20px 0;
        }

        .final-page img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin: 20px;
        }

        .hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            color: #ff6b9d;
            font-size: 2em;
            animation: float 3s linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(-5deg);
            }

            75% {
                transform: rotate(5deg);
            }
        }

        .wiggle {
            animation: wiggle 0.5s ease-in-out;
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            display: none;
            font-size: 1.2em;
            color: #333;
        }

        .flirty-note {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            font-style: italic;
            text-align: center;
        }

        #love-meter {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 6px 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
            font-size: 0.8em;
            z-index: 1500;
        }

        #love-meter .label {
            color: #c44569;
            font-weight: 600;
            margin-bottom: 4px;
            text-align: center;
        }

        #love-meter .bar {
            width: 140px;
            height: 8px;
            border-radius: 10px;
            background: #ffe6f0;
            overflow: hidden;
        }

        #love-meter .fill {
            display: block;
            height: 100%;
            width: 0%;
            border-radius: 10px;
            background: linear-gradient(90deg, #ff6b9d, #ff9a9e);
            transition: width 0.3s ease;
        }

        .click-heart {
            position: fixed;
            font-size: 1.4em;
            pointer-events: none;
            animation: clickHeartFloat 1s ease-out forwards;
        }

        @keyframes clickHeartFloat {
            0% {
                transform: translateY(0) scale(0.8);
                opacity: 1;
            }

            100% {
                transform: translateY(-60px) scale(1.2);
                opacity: 0;
            }
        }

        #open-heart {
            font-size: 0px;
            text-align: center;
            margin-bottom: 20px;
            opacity: 0;
            animation: heartOpen 2s ease-out forwards;
        }

        @keyframes heartOpen {
            0% {
                font-size: 0px;
                opacity: 0;
                transform: scale(0);
            }

            60% {
                font-size: 80px;
                opacity: 1;
                transform: scale(1.2);
            }

            100% {
                font-size: 60px;
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Carousel container */
        #carousel {
            width: 400px;
            /* 50% bigger than your old 200px images */
            height: 300px;
            margin: 40px auto;
            position: relative;
            overflow: visible;
            perspective: 1000px;
        }

        /* Track that rotates */
        .carousel-track {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            /* animation: spin 12s linear infinite; */
            animation: none;
        }

        /* All images */
        .carousel-img {
            width: 220px;
            /* 50% bigger */
            height: 220px;
            object-fit: cover;
            border-radius: 20px;
            position: absolute;
            left: 50%;
            top: 50%;
            transform-style: preserve-3d;
            transition: all 0.5s ease;
        }

        /* 3D rotation animation */
        @keyframes spin {
            from {
                transform: rotateY(0deg);
            }

            to {
                transform: rotateY(360deg);
            }
        }


        /* SO After This Is The Section For The Cards Intro section*/

        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffe6f0;
            display: none;
            z-index: 3000;

            /* The important part */
            /* display: flex; */
            justify-content: center;
            align-items: center;

            /* allow scrolling inside overlay on mobile */
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .intro-stage {
            margin: 40px auto;
            /* small vertical margins */
            text-align: center;
            display: none;
            animation: fadeIntro 0.8s ease forwards;

            width: 100%;
            max-width: 800px;

            /* display: flex; */
            flex-direction: column;
            align-items: center;
            /* remove strict vertical centering that can hide overflow */
            justify-content: flex-start;
        }



        .intro-title {
            font-size: 2.5em;
            color: #ff4081;
            margin-bottom: 15px;
        }

        .intro-text {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 25px;
        }

        .intro-button {
            padding: 15px 40px;
            font-size: 1.3em;
            border: none;
            border-radius: 40px;
            cursor: pointer;
            background: #ff4f92;
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Tiny tap animation for wish button */
        .wish-pressed {
            transform: scale(0.92) translateY(1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
            transition: transform 0.12s ease, box-shadow 0.12s ease;
        }

        .wish-tap-emoji {
            position: absolute;
            font-size: 1.4em;
            pointer-events: none;
            animation: wishTapFloat 0.5s ease-out forwards;
        }

        @keyframes wishTapFloat {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(-25px);
                opacity: 0;
            }
        }


        .love-letter {
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.7s ease;
        }

        .letter-heading {
            font-size: 1.8em;
            color: #ff2e74;
        }

        .letter-text {
            margin-top: 10px;
            font-size: 1.1em;
            color: #333;
            white-space: pre-line;
        }

        .letter-sign {
            margin-top: 15px;
            font-weight: bold;
            color: #ff4f92;
        }

        @keyframes fadeIntro {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Full-screen dark overlay for the wish modal */
        #wish-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.45);
            display: none;
            z-index: 4000;
            justify-content: center;
            align-items: center;
        }

        /* The centered card */
        #wish-modal {
            background: #fff;
            padding: 30px 25px;
            border-radius: 18px;
            max-width: 480px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
            text-align: center;
            animation: fadeIntro 0.4s ease;
        }

        .magazine-block {
            display: flex;
            gap: 24px;
            align-items: center;
            margin-bottom: 30px;
        }

        .magazine-block.reverse {
            flex-direction: row-reverse;
        }

        .magazine-image {
            flex: 0 0 260px;
        }

        .magazine-image img {
            width: 100%;
            height: auto;
            border-radius: 16px;
            object-fit: cover;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);
        }

        .magazine-text {
            flex: 1;
            text-align: left;
        }

        .magazine-text h3 {
            margin: 0 0 8px 0;
            font-size: 1.4em;
            color: #ff6b9d;
        }

        .magazine-text p {
            margin: 0 0 6px 0;
            line-height: 1.5;
        }

        /* Mobile: stack image above text */
        @media (max-width: 768px) {

            .magazine-block,
            .magazine-block.reverse {
                flex-direction: column;
                align-items: flex-start;
            }

            .magazine-image {
                width: 100%;
            }

            .magazine-text {
                text-align: left;
                width: 100%;
            }
        }

        /* Disable text selection everywhere */
        * {
            -webkit-user-select: none;
            /* Safari / iOS */
            -moz-user-select: none;
            /* Firefox */
            -ms-user-select: none;
            /* IE/Edge legacy */
            user-select: none;
        }

        /* Remove blue focus outline on buttons/links (visual only) */
        button:focus,
        a:focus {
            outline: none;
        }

        /* If you ever need an actually editable field, override like this: */
        /*
.editable,
.editable * {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}
*/
    </style>
</head>
<div id="wish-modal-overlay">
    <div id="wish-modal">
        <h2 class="letter-heading">Wish Granted üíù</h2>
        <p class="letter-text" style="margin-top: 10px;">
            Congratulations, your wish just came true.
            You now own my heart ‚Äî fully, permanently, and shamelessly ‚Äî
            forever and ever. No returns, no refunds, no escape. üòè‚ù§Ô∏è
        </p>
        <button id="proceed-btn" class="intro-button" style="margin-top: 20px;">
            Proceed, my love! üíò
        </button>
    </div>
</div>

<body>
    <!-- Landing Page -->
    <div id="landing-page"
        style="position:fixed;top:0;left:0;width:100%;height:100%;background:#ffe6f0;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2000;">
        <h1 style="font-family:'Poppins',sans-serif;color:#c44569;text-align:center;margin-bottom:30px;">Welcome To The
            Website üöÄ</h1>
        <button id="launch-btn"
            style="padding:20px 40px;font-size:1.5em;border:none;border-radius:50px;background:linear-gradient(45deg,#ff6b9d,#c44569);color:white;cursor:pointer;box-shadow:0 5px 15px rgba(0,0,0,0.2);">Open</button>
    </div>

    <!-- Intro Overlay (hidden until passcode success) -->
    <div id="intro-overlay">

        <!-- Stage 1 -->
        <div id="intro-stage-1" class="intro-stage">
            <h1 class="intro-title">Congratulations‚Ä¶ You Just Unlocked My Heart ‚ù§Ô∏è</h1>

            <p class="intro-text" style="max-width: 700px;">
                Before the real website opens, I want you to pause for a moment.
                Today isn‚Äôt a birthday, it isn‚Äôt an anniversary, it isn‚Äôt a festival ‚Äî
                it‚Äôs simply a day I chose to tell you what my heart has been wanting to say
                for so long.
                You are special to me in a way that even my words struggle to express.
                And everything you‚Äôre about to see‚Ä¶ I made it only for you.
            </p>

            <!-- Looping Video Placeholder -->
            <video id="intro-video" width="360" height="360" autoplay muted loop playsinline
                style="border-radius: 15px; margin-bottom: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.2);">
                <source src="res/gif-1.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <button id="intro-btn-1" class="intro-button" style="margin-top: 30px;">
                Continue
            </button>
        </div>


        <!-- Stage 2 -->
        <div id="intro-stage-2" class="intro-stage">
            <div class="love-letter">
                <h2 class="letter-heading">To My Love ‚ù§Ô∏è</h2>

                <p class="letter-text">
                    I want to be honest with you in a way I‚Äôve never been before.
                    Somewhere between our jokes, our chaos, our effortless connection,
                    and the small moments that felt bigger than they should‚Ä¶
                    I found myself caring about you in a way that is deeper, softer,
                    and truer than I expected.

                    This isn‚Äôt a birthday message or a casual note.
                    This is my very first love letter to you.

                    You make my days warmer, my thoughts louder, and my heart quieter
                    all at once.
                    You make me look forward to things that used to feel ordinary.
                    And I don‚Äôt know when it happened, but being around you just feels right.

                    If feelings had a gravity, yours would be the one mine keeps falling toward.
                </p>

                <p class="letter-sign">Yours ‚Äî more than you realize. ‚ù§Ô∏è</p>
            </div>

            <button id="intro-btn-2" class="intro-button">Take Me In</button>
        </div>

        <!-- Stage 3 ‚Äì Wishes page -->
        <div id="intro-stage-3" class="intro-stage">
            <h1 class="intro-title">Make A Wish ‚ú®</h1>
            <p class="intro-text" style="max-width: 700px;">
                If you could ask for one thing related to us right now, what would it be?
                Type your wish below‚Ä¶ or just tap and let my heart decide for you. üíñ
            </p>

            <div id="wish-display" style="
    padding: 12px 18px;
    border-radius: 30px;
    border: none;
    width: 80%;
    /* max-width: 400px; */
    font-size: 1em;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
    outline: none;
    background: #ffffff;
    cursor: pointer;
    user-select: none;
  ">
                Tap here to make a wish‚Ä¶
            </div>

            <button id="wish-btn" class="intro-button" style="margin-top: 20px;">
                Make the wish true ‚ú®
            </button>


            <!-- Hidden card that appears after auto wish -->
            <div id="wish-card" style="
      display:none;
      margin-top: 30px;
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.18);
      max-width: 500px;
  ">
                <h2 class="letter-heading">Wish Granted üíù</h2>
                <p class="letter-text" style="margin-top: 10px;">
                    Congratulations, your wish just came true.
                    You now own my heart ‚Äî fully, permanently, and shamelessly ‚Äî
                    forever and ever. No returns, no refunds, no escape. üòè‚ù§Ô∏è
                </p>
                <button id="proceed-btn" class="intro-button" style="margin-top: 20px;">
                    Proceed, my love! üíò
                </button>
            </div>
        </div>



    </div>


    <div class="container">
        <section class="hero">
            <img src="res/photo-1.png" alt="Apoorva">
            <!-- In hero section, change h1 to: -->
            <h1 id="hero-title" data-text="Hey Apoorva, My Flirty Mard! üíï"></h1>

            <p>From your cheeky gharwali Sarvagy, who can't stop staring at your dusky glow and dreaming of your 5'5" of
                perfection. I'm 5'7" of pure flirtation ‚Äì ready to sweep you off your feet? üòò</p>
        </section>

        <!-- Just inside <body>, after bg-music -->
        <div id="love-meter">
            <div class="label">Love Meter ‚ù§Ô∏è</div>
            <div class="bar"><span class="fill"></span></div>
        </div>





        <section class="section">
            <h2>What I Love Most About You üíñ</h2>

            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-3.png" alt="Apoorva laughing">
                </div>
                <div class="magazine-text">
                    <h3>Your laugh and your light</h3>
                    <p>
                        Your laugh is ridiculously contagious. The moment you start giggling,
                        the whole world around you feels softer and lighter ‚Äî including me.
                    </p>
                    <p>
                        You don‚Äôt just enter a room, you brighten it. You make ordinary moments
                        feel like scenes from a feel‚Äëgood movie I never want to end.
                    </p>
                    <p class="flirty-note">
                        You‚Äôre the plot twist my boring days were waiting for. üòâ
                    </p>
                </div>
            </div>

            <div class="magazine-block reverse">
                <div class="magazine-image">
                    <img src="res/photo-4.png" alt="Apoorva smiling">
                </div>
                <div class="magazine-text">
                    <h3>Your dusky glow</h3>
                    <p>
                        Your dusky skin is my favourite shade of sunset ‚Äî warm, gentle,
                        and somehow impossible to look away from.
                    </p>
                    <p>
                        Standing next to you, I always feel like the lucky one who got the
                        most beautiful view in the whole world.
                    </p>
                    <p class="flirty-note">
                        If glow was a competition, you‚Äôd be permanently banned for being too good. üåÖ
                    </p>
                </div>
            </div>

            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-5.png" alt="Apoorva posing">
                </div>
                <div class="magazine-text">
                    <h3>Your charm and your chaos</h3>
                    <p>
                        You flirt, you tease, you joke ‚Äî and somehow manage to make it all feel
                        so safe and soft at the same time.
                    </p>
                    <p>
                        You‚Äôre equal parts comfort and chaos, and my heart has fallen for both
                        sides of you without a single complaint.
                    </p>
                    <p class="flirty-note">
                        I didn‚Äôt ‚Äúcatch feelings‚Äù, you just walked in and stole them all. ü™ù
                    </p>
                </div>
            </div>
        </section>

        </section>







        <section class="section">
            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-2.png" alt="Park meetup">
                </div>
                <div class="magazine-text">
                    <h3>That Park Day üå≥</h3>
                    <p>
                        That day in the park felt like a glitch in the universe ‚Äî everything
                        else blurred out and it was just your laugh, your eyes, and that teasing
                        ‚Äúaurat‚Äù you threw at me.
                    </p>
                    <p>
                        I pretended to act normal, but honestly, my heart had already walked
                        over to you, sat down, and decided, ‚ÄúYep, this is home now.‚Äù
                    </p>
                    <p class="flirty-note">
                        You called me your aurat as a joke. My heart took it as a contract. üòè
                    </p>
                </div>
            </div>

            <div class="magazine-block reverse">
                <div class="magazine-image">
                    <img src="res/photo-11.jpg" alt="Shashwat birthday group photo">
                </div>
                <div class="magazine-text">
                    <h3>Shashwat‚Äôs Birthday Spark üéâ</h3>
                    <p>
                        In that chaotic birthday mess ‚Äî people shouting, music blasting,
                        random jokes flying around ‚Äî you were still the loudest thing in my mind.
                    </p>
                    <p>
                        Somewhere between your one‚Äëliners and your smile, I realised I wasn‚Äôt
                        just enjoying the party‚Ä¶ I was quietly falling for the girl who was
                        running it.
                    </p>
                    <p class="flirty-note">
                        The party ended. My crush on you didn‚Äôt. üé∂
                    </p>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="magazine-block reverse">
                <div class="magazine-image">
                    <img src="res/photo-3.png" alt="Apoorva thoughtful">
                </div>
                <div class="magazine-text">
                    <h3>Mini Game 2: Perfect Timing ‚ù§Ô∏è</h3>
                    <p>
                        One more tiny challenge: try to stop the moving heart when it reaches the
                        glowing ‚Äúsweet spot‚Äù on the bar. Your timing score decides the message you get.
                    </p>
                    <p>
                        Spoiler: even if you miss, my heart is already permanently stuck on you.
                    </p>

                    <div id="timing-game-wrapper" style="margin-top: 20px; max-width: 360px;">
                        <!-- Bar -->
                        <div id="timing-bar" style="
            position: relative;
            width: 100%;
            height: 24px;
            border-radius: 999px;
            background: #ffe6f0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        ">
                            <!-- Sweet spot -->
                            <div id="timing-sweet" style="
              position: absolute;
              left: 40%;
              width: 20%;
              height: 100%;
              background: rgba(255,107,157,0.35);
          "></div>

                            <!-- Moving heart -->
                            <div id="timing-heart" style="
              position: absolute;
              top: 50%;
              left: 0;
              transform: translate(-50%, -50%);
              font-size: 1.4em;
          ">
                                ‚ù§Ô∏è
                            </div>
                        </div>

                        <button id="timing-btn" class="intro-button"
                            style="margin-top: 16px; font-size:1em; padding:10px 26px;">
                            Stop the heart üíì
                        </button>

                        <p id="timing-result" style="margin-top: 8px; font-size: 0.95em;"></p>
                    </div>
                </div>
            </div>
        </section>





        <section class="section">
            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-6.png" alt="Apoorva playful">
                </div>
                <div class="magazine-text">
                    <h3>Little moments, big feelings üòò</h3>
                    <p>
                        These small, random photos of you are actually my favourites, because
                        they‚Äôre so‚Ä¶ you. Unfiltered, dramatic, adorable, and 100% real.
                    </p>
                    <p>
                        It‚Äôs in these tiny moments ‚Äî mid‚Äëlaugh, mid‚Äëpose, mid‚Äëchaos ‚Äî that
                        I realise how naturally my heart has started choosing you.
                    </p>
                    <p class="flirty-note">
                        You‚Äôre not ‚Äúphotogenic‚Äù, you‚Äôre just dangerously cute in real life. üíÉ
                    </p>
                </div>
            </div>

            <div class="magazine-block reverse">
                <div class="magazine-image">
                    <img src="res/photo-7.png" alt="Apoorva smiling">
                </div>
                <div class="magazine-text">
                    <h3>More memories I replay üíë</h3>
                    <p>
                        Every time I scroll through these pictures, it feels like flipping
                        through my favourite chapter of life ‚Äî the one where you quietly
                        became the main character.
                    </p>
                    <p>
                        You‚Äôre in my gallery, in my chats, in my playlists‚Ä¶ and slowly,
                        very shamelessly, in every future plan my brain comes up with.
                    </p>
                    <p class="flirty-note">
                        My phone storage is full, but I still want more pictures of you. üß≤
                    </p>
                </div>
            </div>
        </section>



        <section class="section">
            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-8.png" alt="Apoorva smiling big">
                </div>
                <div class="magazine-text">
                    <h3>Your smile, my favourite view üåü</h3>
                    <p>
                        Your smile is the one notification I never get tired of. It makes
                        bad days lighter, normal days special, and good days feel legendary.
                    </p>
                    <p>
                        Sometimes I catch myself thinking about your smile out of nowhere ‚Äî
                        that‚Äôs how I know this isn‚Äôt just a crush, it‚Äôs something softer,
                        deeper, and very real.
                    </p>
                    <p class="flirty-note">
                        If happiness had a face, it would look suspiciously like you. üì∏
                    </p>
                </div>
            </div>

            <div class="magazine-block reverse">
                <div class="magazine-image">
                    <img src="res/photo-9.png" alt="Apoorva goofy">
                </div>
                <div class="magazine-text">
                    <h3>The side of you I adore üíï</h3>
                    <p>
                        Your goofy, dramatic, over‚Äëthe‚Äëtop side is honestly one of the best
                        things about you. You make being around you feel easy and fun.
                    </p>
                    <p>
                        I don‚Äôt just like your ‚Äúperfect‚Äù moments ‚Äî I love the unfiltered ones
                        where we‚Äôre just two idiots laughing at absolutely nothing.
                    </p>
                    <p class="flirty-note">
                        I don‚Äôt want a ‚Äúperfect‚Äù love story. I want this silly, loud,
                        ours‚Äëonly one with you. üé•
                    </p>
                </div>
            </div>
        </section>


        <section class="section">
            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-10.png" alt="You and Apoorva vibe">
                </div>
                <div class="magazine-text">
                    <h3>Us ‚Äî the perfectly imperfect duo üòò</h3>
                    <p>
                        You‚Äôre the fiery, dusky queen at 5'5", and I‚Äôm the slightly taller,
                        slightly stupider 5'7" guy who still can‚Äôt believe he gets to flirt
                        with you this much.
                    </p>
                    <p>
                        We‚Äôre not some calm, aesthetic couple ‚Äî we‚Äôre chaos, inside jokes,
                        teasing, flirting, and soft moments hidden in between. And that‚Äôs
                        exactly why I want this to be official.
                    </p>
                    <p class="flirty-note">
                        Out of all the versions of my future, the one with you in it
                        is the only one that feels right. üíë
                    </p>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="magazine-block">
                <div class="magazine-image">
                    <img src="res/photo-7.png" alt="Apoorva playful">
                </div>
                <div class="magazine-text">
                    <h3>Mini Game: Fill My Heart Meter üéÆ</h3>
                    <p>
                        Last challenge before the big question: you have 8 seconds to tap as many hearts
                        as you can inside this box. Every tap fills the love meter a little more.
                    </p>
                    <p>
                        No matter the score, one thing is already fixed ‚Äî who my heart belongs to.
                    </p>

                    <div id="love-game-wrapper" style="margin-top: 20px;">
                        <!-- Bigger play area -->
                        <div id="love-game-area" style="
            position: relative;
            margin: 0 auto;
            width: 320px;
            height: 240px;
            border-radius: 24px;
            background: linear-gradient(135deg,#ffe6f0,#ffd1e8);
            box-shadow: 0 6px 18px rgba(0,0,0,0.18);
            overflow: hidden;
        ">
                            <button id="love-game-heart" style="
              position: absolute;
              width: 70px;
              height: 70px;
              border-radius: 50%;
              border: none;
              background: #ff4f92;
              color: #fff;
              font-size: 1.8em;
              cursor: pointer;
              box-shadow: 0 5px 14px rgba(0,0,0,0.25);
          ">
                                ‚ù§Ô∏è
                            </button>
                        </div>

                        <!-- Love meter bar -->
                        <div style="margin-top: 10px;">
                            <div style="
              width: 100%;
              max-width: 320px;
              height: 10px;
              border-radius: 999px;
              background: #ffe6f0;
              overflow: hidden;
              box-shadow: 0 3px 8px rgba(0,0,0,0.12);
          ">
                                <div id="love-game-meter" style="
                width: 0%;
                height: 100%;
                border-radius: 999px;
                background: linear-gradient(90deg,#ff6b9d,#ffb347);
                transition: width 0.2s ease;
            "></div>
                            </div>
                        </div>

                        <p id="love-game-timer" style="margin-top: 6px; font-size: 0.95em; color:#c44569;">
                            Tap the heart to start the game ‚Äî Time: 8s
                        </p>
                        <p id="love-game-result" style="margin-top: 4px; font-size: 1em;"></p>
                    </div>
                </div>
            </div>
        </section>



        <section class="proposal">
            <h2>So‚Ä¶ Will You Make This Official With Me? üíç</h2>
            <p>Apoorva, my mard, your humor, charm, and that dusky glow have me completely smitten. Say yes and let's
                turn up the flirt game! (No? Oh, you'll change your mind...) üòú</p>
            <div class="buttons">
                <button id="yes-btn">Yes, My Love! üíñ</button>
                <button id="no-btn">No Way, Handsome! üòè</button>
            </div>
        </section>



    </div>
    <div class="final-page" id="final-page">
        <div id="open-heart">‚ù§Ô∏è</div>

        <h1>Yay! Apoorva You Have Made Me The Happiest Guy Alive! üéâ</h1>
        <p>Thank you for saying yes, my mard Apoorva. Your humor, your charm, your smile, your dusky beauty ‚Äì everything
            about you makes my heart race and life feel like a romantic comedy. I love flirting with you, and now I get
            to do it forever! üíï</p>
        <div id="carousel">
            <div class="carousel-track">
                <img src="res/photo-1.png" class="carousel-img">
                <img src="res/photo-2.png" class="carousel-img">
                <img src="res/photo-3.png" class="carousel-img">
                <img src="res/photo-4.png" class="carousel-img">
                <img src="res/photo-5.png" class="carousel-img">
                <img src="res/photo-6.png" class="carousel-img">
                <img src="res/photo-7.png" class="carousel-img">
                <img src="res/photo-8.png" class="carousel-img">
                <img src="res/photo-9.png" class="carousel-img">
                <img src="res/photo-10.png" class="carousel-img">
            </div>
        </div>




        <p>You're my everything, my gharwali. Let's create flirty memories, sweet kisses, and endless laughter. Forever
            yours, Sarvagy. üòç‚ù§Ô∏è</p>
        <div class="flirty-note">P.S. Your 'no' was just a tease ‚Äì I knew you'd say yes! üòâ</div>

        <div class="hearts" id="hearts"></div>
        <div class="popup" id="popup">Arre, no flirting with rejection! üòú</div>

        <!-- Firebase SDKs -->
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
        <script>
            document.addEventListener('contextmenu', e => e.preventDefault());
            document.addEventListener('keydown', (e) => {
                if (e.key === "F12" ||
                    (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J" || e.key === "C")) ||
                    (e.ctrlKey && e.key === "U")
                ) {
                    e.preventDefault();
                    alert("Action disabled.");
                }
            });

            const bgMusic = document.getElementById('bg-music');
            const landingPage = document.getElementById('landing-page');
            const launchBtn = document.getElementById('launch-btn');
            const PASSCODE = "projectnemo@sjam3";  // change this to whatever you want

            let passFailCount = 0;

            let pageStartTime = null;

function markStartTime() {
    pageStartTime = performance.now();
}

function getTotalTime() {
    if (pageStartTime == null) return 0;
    return (performance.now() - pageStartTime) / 1000; // seconds
}



            // launchBtn.addEventListener('click', () => {
            //     const input = prompt("Enter the special passcode to access:");
            //     if (input !== PASSCODE) {
            //         alert("Incorrect passcode. Access denied.");
            //         passFailCount++;
            //         return;
            //     }
            //     document.title = "I Really Like You Apoorva";
            //     landingPage.style.display = 'none';
            //     bgMusic.currentTime = 25;
            //     bgMusic.play().catch(err => console.log('Music blocked:', err));
            //     document.querySelector('.container').style.display = 'block';
            // });
            // Start typing only after passcode success
            launchBtn.addEventListener('click', () => {
                const input = prompt("Enter the special passcode to access:");
                if (input !== PASSCODE) {
                    alert("Incorrect passcode. Access denied.");
                    passFailCount++;
                    return;
                }
                markStartTime();
                // Show Intro Screen Stage 1
                document.getElementById("intro-overlay").style.display = "flex";
                document.getElementById("intro-stage-1").style.display = "block";
                document.title = "I Really Like You Apoorva";
                landingPage.style.display = 'none';
                bgMusic.currentTime = 25;
                bgMusic.play().catch(err => console.log('Music blocked:', err));
                //document.querySelector('.container').style.display = 'block';
                //typeNext();
            });
            const intro1 = document.getElementById("intro-stage-1");
            const intro2 = document.getElementById("intro-stage-2");
            const overlay = document.getElementById("intro-overlay");
            const mainContainer = document.querySelector(".container");

            document.getElementById("intro-btn-1").addEventListener("click", () => {
                intro1.style.display = "none";
                intro2.style.display = "block";
            });

            const intro3 = document.getElementById("intro-stage-3");

            document.getElementById("intro-btn-2").addEventListener("click", () => {
                intro2.style.display = "none";
                intro3.style.display = "block";
            });

            const wishModal = document.getElementById("wish-modal");
            const wishModalOverlay = document.getElementById("wish-modal-overlay");
            const proceedBtn = document.getElementById("proceed-btn");

            const autoWishText = "Sarvagy's love";
            // --- Wish interaction tracking ---
            let wishAutoTyped = false;
            let wishAutoTypedAt = null;
            let wishConfirmedAt = null;

            const wishDisplay = document.getElementById("wish-display");
            const wishBtn = document.getElementById("wish-btn");

            wishBtn.disabled = true;  // start disabled
            wishBtn.style.opacity = 0.6;
            wishBtn.style.cursor = "default";

            function typeWishAndClick() {
                if (wishDisplay.dataset.done === "true") return;
                wishDisplay.dataset.done = "true";

                wishAutoTyped = true;
                wishAutoTypedAt = new Date().toISOString();

                const autoWishText = "Sarvagy's love";
                wishDisplay.textContent = "";
                let i = 0;

                function step() {
                    if (i <= autoWishText.length) {
                        wishDisplay.textContent = autoWishText.slice(0, i);
                        i++;
                        setTimeout(step, 80);
                    } else {
                        setTimeout(() => {
                            // visual press + click
                            // enable button now
                            wishBtn.disabled = false;
                            wishBtn.style.opacity = 1;
                            wishBtn.style.cursor = "pointer";
                            wishBtn.click();
                        }, 300);
                    }
                }
                step();
            }

            if (wishDisplay) {
                wishDisplay.addEventListener("click", typeWishAndClick);
            }

            if (wishBtn) {
                wishBtn.addEventListener("click", () => {
                    if (wishBtn.disabled) return;  // ignore early taps

                    if (!wishConfirmedAt) {
                        wishConfirmedAt = new Date().toISOString();
                    }
                    wishModalOverlay.style.display = "flex";
                });
            }


            // ‚ÄúProceed, my love!‚Äù opens main site
            proceedBtn.addEventListener("click", () => {
                wishModalOverlay.style.display = "none";
                overlay.style.display = "none";
                mainContainer.style.display = "block";
                document.body.style.overflow = "auto";
                if (typeof typeNext === "function") {
                    typeNext();
                }
            });



            // Update love meter as she scrolls
            const loveFill = document.querySelector('#love-meter .fill');
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.body.scrollHeight - window.innerHeight;
                const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
                loveFill.style.width = Math.min(100, progress + 10) + '%';
            });
            document.addEventListener('click', (e) => {
                // Don‚Äôt trigger on buttons to avoid clutter around Yes/No
                if (e.target.tagName.toLowerCase() === 'button') return;
                const span = document.createElement('span');
                span.className = 'click-heart';
                span.textContent = 'üíñ';
                span.style.left = e.clientX + 'px';
                span.style.top = e.clientY + 'px';
                document.body.appendChild(span);
                setTimeout(() => span.remove(), 1000);
            });

            const heroTitle = document.getElementById('hero-title');
            if (heroTitle) {
                const fullText = heroTitle.dataset.text;
                heroTitle.textContent = '';
                let i = 0;
                function typeNext() {
                    if (i <= fullText.length) {
                        heroTitle.textContent = fullText.slice(0, i);
                        i++;
                        setTimeout(typeNext, 70);
                    }
                }
            }

            // --- Letter (Stage 2) timing ---
            let letterStartTime = null;
            let letterTotalTime = 0;

            // when Stage 2 becomes visible
            const introBtn1 = document.getElementById("intro-btn-1");
            if (introBtn1) {
                introBtn1.addEventListener("click", () => {
                    // Stage 1 -> Stage 2
                    const intro2 = document.getElementById("intro-stage-2");
                    if (intro2) {
                        letterStartTime = performance.now();
                    }
                });
            }

            // when Stage 2 -> Stage 3 (letter finished)
            const introBtn2 = document.getElementById("intro-btn-2");
            if (introBtn2) {
                introBtn2.addEventListener("click", () => {
                    if (letterStartTime != null) {
                        letterTotalTime =
                            (performance.now() - letterStartTime) / 1000; // seconds
                        letterStartTime = null;
                    }
                });
            }



            // --- Game 1: Fill My Heart Meter ---
            let game1Started = false;
            let game1StartAt = null;
            let game1EndAt = null;
            let game1Clicks = 0;
            let game1FinalPercent = 0; // 0..100

            // --- New Mini-game: Fill My Heart Meter ---
            const lgArea = document.getElementById("love-game-area");
            const lgHeart = document.getElementById("love-game-heart");
            const lgTimer = document.getElementById("love-game-timer");
            const lgResult = document.getElementById("love-game-result");
            const lgMeter = document.getElementById("love-game-meter");

            let lgClicks = 0;
            let lgTimeLeft = 8;
            let lgTimerInterval = null;
            let lgMoveInterval = null;
            let lgStarted = false;
            const lgMaxClicksForFull = 15; // ~15 taps ‚âà full meter

            // in your existing game 1 code:
            if (lgHeart) {
                lgHeart.addEventListener("click", () => {
                    if (!lgStarted) {
                        lgStartGameOnce();
                        game1Started = true;
                        game1StartAt = new Date().toISOString();
                    }
                    if (!lgHeart.disabled && lgTimeLeft > 0) {
                        lgClicks++;
                        game1Clicks = lgClicks;

                        const percent = Math.min(100, (lgClicks / lgMaxClicksForFull) * 100);
                        lgMeter.style.width = percent + "%";
                        game1FinalPercent = percent;

                        lgHeart.style.transform = "scale(0.9)";
                        setTimeout(() => {
                            lgHeart.style.transform = "scale(1)";
                        }, 120);
                    }
                });
            }

            function lgEndGame() {
                clearInterval(lgTimerInterval);
                clearInterval(lgMoveInterval);
                lgHeart.disabled = true;

                if (!game1EndAt) {
                    game1EndAt = new Date().toISOString();
                }

                // existing result text...
            }

            function lgMoveHeartRandom() {
    const areaRect  = lgArea.getBoundingClientRect();
    const heartRect = lgHeart.getBoundingClientRect();

    const maxX = areaRect.width  - heartRect.width;
    const maxY = areaRect.height - heartRect.height;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    lgHeart.style.left = x + "px";
    lgHeart.style.top  = y + "px";
}

function lgStartGameOnce() {
    if (lgStarted) return;
    lgStarted = true;

    lgClicks = 0;
    lgTimeLeft = 8;
    lgResult.textContent = "";
    lgMeter.style.width = "0%";
    lgTimer.textContent = "Time left: 8s";

    lgMoveHeartRandom();

    lgTimerInterval = setInterval(() => {
        lgTimeLeft--;
        lgTimer.textContent = "Time left: " + lgTimeLeft + "s";
        if (lgTimeLeft <= 0) {
            lgEndGame();
        }
    }, 1000);

    lgMoveInterval = setInterval(lgMoveHeartRandom, 600);
}


            // --- Game 2: Perfect Timing ---
            let game2Played = false;
            let game2LastScore = null; // 'perfect' | 'close' | 'miss'
            let game2LastAt = null;

            

            function timingStop() {
                tRunning = false;
                cancelAnimationFrame(tAnimFrame);

                const sweetRect = tSweet.getBoundingClientRect();
                const heartRect = tHeart.getBoundingClientRect();

                const heartCenter = heartRect.left + heartRect.width / 2;
                const sweetStart = sweetRect.left;
                const sweetEnd = sweetRect.left + sweetRect.width;

                let msg;
                let score;

                if (heartCenter >= sweetStart && heartCenter <= sweetEnd) {
                    msg = "Perfect timing! ...";
                    score = 'perfect';
                } else if (heartCenter >= sweetStart - sweetRect.width &&
                    heartCenter <= sweetEnd + sweetRect.width) {
                    msg = "Almost perfect! ...";
                    score = 'close';
                } else {
                    msg = "You missed the zone this time, ...";
                    score = 'miss';
                }

                tResult.textContent = msg;
                tBtn.textContent = "Play again üîÅ";

                game2Played = true;
                game2LastScore = score;
                game2LastAt = new Date().toISOString();
            }






            const noBtn = document.getElementById('no-btn');
            const yesBtn = document.getElementById('yes-btn');
            const finalPage = document.getElementById('final-page');
            const popup = document.getElementById('popup');
            const hearts = document.getElementById('hearts');

            let noClicks = 0;
            const messages = [
                "Arre, no flirting with rejection! üòú",
                "Try again, my mard! üòâ",
                "System says NO is not an option. üö´",
                "You're too cute to say no! üíï",
                "Come on, say yes and let's flirt! üòÇ"
            ];

            const sectionTimes = {};
            const sectionViews = {};
            let sectionEntryTime = {};

            const sections = document.querySelectorAll('.section, .hero, .proposal');
            sections.forEach(section => {
                const key = section.id || section.innerText.slice(0, 20);
                sectionTimes[key] = 0;
                sectionViews[key] = 0;
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const key = entry.target.id || entry.target.innerText.slice(0, 20);
                    if (entry.isIntersecting) {
    sectionEntryTime[key] = performance.now();
    sectionViews[key] += 1;
} else if (sectionEntryTime[key] != null) {
    const delta = (performance.now() - sectionEntryTime[key]) / 1000;
    if (Number.isFinite(delta) && delta >= 0) {
        sectionTimes[key] += delta;
    }
    sectionEntryTime[key] = null;
}

                });
            }, { threshold: 0.5 });

            sections.forEach(section => observer.observe(section));

            // Track time spent on each paragraph inside sections
            const paragraphTimes = {};
            const paragraphEntryTime = {};

            const paragraphs = document.querySelectorAll('.section p, .hero p, .proposal p');

            paragraphs.forEach((p, index) => {
                let raw = p.innerText.slice(0, 20).replace(/\s+/g, '_');
                if (!raw) raw = 'paragraph_' + index;
                p.dataset.id = raw;
                paragraphTimes[raw] = 0;
            });


            const paragraphObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const id = entry.target.dataset.id;
                    if (entry.isIntersecting) {
    paragraphEntryTime[id] = performance.now();
} else if (paragraphEntryTime[id] != null) {
    const delta = (performance.now() - paragraphEntryTime[id]) / 1000;
    if (Number.isFinite(delta) && delta >= 0) {
        paragraphTimes[id] += delta;
    }
    paragraphEntryTime[id] = null;
}

                });
            }, { threshold: 0.8 }); // consider ‚Äúread‚Äù if 80% visible
            paragraphs.forEach(p => paragraphObserver.observe(p));



            noBtn.addEventListener('click', () => {

                const proposal = document.querySelector('.proposal');
                const rect = proposal.getBoundingClientRect();

                // Width/height inside the proposal box
                const boxWidth = rect.width;
                const boxHeight = rect.height * 0.45; // upper 45% stays on screen

                // Random position inside proposal
                const newX = Math.random() * (boxWidth - noBtn.offsetWidth);
                const newY = Math.random() * (boxHeight - noBtn.offsetHeight);

                // Position relative to proposal, not whole page
                noBtn.style.position = 'absolute';
                noBtn.style.left = `${newX}px`;
                noBtn.style.top = `${newY}px`;

                // Wiggle effect
                noBtn.classList.add('wiggle');
                setTimeout(() => noBtn.classList.remove('wiggle'), 500);

                // Popup message
                popup.textContent = messages[noClicks % messages.length];
                popup.style.display = 'block';
                setTimeout(() => popup.style.display = 'none', 2000);

                noClicks++;
            });


            // Initialize Firebase
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyBIyIXYNvVhJnSK58rB29K9n7SNnbaoqnc",
                authDomain: "proposal-apoorva-sarvagy.firebaseapp.com",
                databaseURL: "https://proposal-apoorva-sarvagy-default-rtdb.asia-southeast1.firebasedatabase.app",
                projectId: "proposal-apoorva-sarvagy",
                storageBucket: "proposal-apoorva-sarvagy.firebasestorage.app",
                messagingSenderId: "794226715688",
                appId: "1:794226715688:web:284222db7af709b2cd591d",
                measurementId: "G-BZ4R12MR9T"
            };
            firebase.initializeApp(firebaseConfig);
            const database = firebase.database();

            yesBtn.addEventListener('click', () => {
                // Soft confetti shower for 5 seconds
                let duration = 5000;
                let end = Date.now() + duration;

                (function frame() {
                    confetti({
                        particleCount: 2,
                        startVelocity: 15,
                        spread: 80,
                        scalar: 0.8,
                        origin: { x: Math.random(), y: 0 }
                    });

                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                })();


                // Floating hearts
                for (let i = 0; i < 20; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.textContent = '‚ù§Ô∏è';
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDelay = Math.random() * 3 + 's';
                    hearts.appendChild(heart);
                    setTimeout(() => heart.remove(), 3000);
                }
                const yesRef = database.ref('proposal_responses');

                yesRef.push({
                    name: 'Apoorva',
                    response: 'yes',
                    timestamp_raw_utc: new Date().toISOString(),
                    timestamp_ist: new Date().toLocaleString("en-IN", {
                        timeZone: "Asia/Kolkata",
                        hour12: false
                    }),
                    browser_user_agent: navigator.userAgent,
                    platform: navigator.platform,
                    language: navigator.language,

                    noClicks: noClicks,
                    passFailCount: passFailCount,
                    totalTime: getTotalTime(),

                    // scroll/reading analytics
                    sectionTimes: sanitizeObjectKeys(sectionTimes),
                    sectionViews: sanitizeObjectKeys(sectionViews),
                    paragraphTimes: sanitizeObjectKeys(paragraphTimes),

                    // intro / letter / wish analytics
                    letter: {
                        seconds_spent: sanitizeNumeric(letterTotalTime)
                    },
                    wish: {
                        auto_typed: wishAutoTyped,
                        auto_typed_at_utc: wishAutoTypedAt,
                        confirmed_at_utc: wishConfirmedAt
                    },

                    // game 1 analytics
                    game_fill_my_heart: {
                        started: game1Started,
                        started_at_utc: game1StartAt,
                        ended_at_utc: game1EndAt,
                        clicks: game1Clicks,
                        final_meter_percent: sanitizeNumeric(game1FinalPercent)
                    },

                    // game 2 analytics
                    game_perfect_timing: {
                        played: game2Played,
                        last_result: game2LastScore,   // 'perfect' | 'close' | 'miss' or null
                        last_played_at_utc: game2LastAt
                    }
                });



                // Transition to final page
                setTimeout(() => {
                    if (mainContainer) mainContainer.style.display = 'none';
                    if (overlay) overlay.style.display = 'none';
                    if (landingPage) landingPage.style.display = 'none';
                    finalPage.style.display = 'block';
                    document.body.style.overflow = 'auto';
                }, 1000);

            });
            function sanitizeKey(str) {
                let cleaned = String(str)
                    .replace(/[.#$[\]/]/g, '')  // forbidden chars
                    .replace(/\s+/g, '_')
                    .slice(0, 40);

                if (!cleaned) {
                    cleaned = 'key_' + Math.random().toString(36).slice(2, 8);
                }
                return cleaned;
            }


            function sanitizeNumeric(val) {
                return Number.isFinite(val) ? val : 0;
            }

            function sanitizeObjectKeys(obj) {
                const out = {};
                Object.keys(obj || {}).forEach(k => {
                    const safeKey = sanitizeKey(k);
                    out[safeKey] = sanitizeNumeric(obj[k]);
                });
                return out;
            }


            // 3D carousel placement
            const carouselImgs = document.querySelectorAll(".carousel-img");
            const totalImgs = carouselImgs.length;
            const radius = 400; // Distance from center (adjust to make more round)

            carouselImgs.forEach((img, i) => {
                const angle = (i / totalImgs) * 360;
                img.style.transform = `
        translate(-50%, -50%)
        rotateY(${angle}deg)
        translateZ(${radius}px)
    `;

                // Fade + lighten images based on position
            });

            let rotation = 0;

            function rotateCarousel() {
                rotation += 0.2; // smooth speed

                carouselImgs.forEach((img, i) => {
                    const angle = (i / totalImgs) * 360 + rotation;
                    img.style.transform = `
            translate(-50%, -50%)
            rotateY(${angle}deg)
            translateZ(${radius}px)
        `;
                });

                requestAnimationFrame(rotateCarousel);
            }

            rotateCarousel();

            

            // --- Mini Game 2: Perfect Timing ---
            const tBar = document.getElementById('timing-bar');
            const tSweet = document.getElementById('timing-sweet');
            const tHeart = document.getElementById('timing-heart');
            const tBtn = document.getElementById('timing-btn');
            const tResult = document.getElementById('timing-result');

            let tAnimFrame = null;
            let tDirection = 1;
            let tPos = 0;          // 0..1 across the bar
            let tRunning = false;

            function timingAnimate() {
                if (!tRunning) return;
                // speed
                tPos += 0.01 * tDirection;
                if (tPos >= 1) { tPos = 1; tDirection = -1; }
                if (tPos <= 0) { tPos = 0; tDirection = 1; }

                const barWidth = tBar.clientWidth;
                const x = tPos * barWidth;
                tHeart.style.left = x + 'px';

                tAnimFrame = requestAnimationFrame(timingAnimate);
            }

            function timingStart() {
                if (tRunning) return;
                tRunning = true;
                tResult.textContent = "";
                tBtn.textContent = "Stop the heart üíì";

                // reset position and direction
                tPos = 0;
                tDirection = 1;
                cancelAnimationFrame(tAnimFrame);
                timingAnimate();
            }

            function timingStop() {
                tRunning = false;
                cancelAnimationFrame(tAnimFrame);

                const sweetRect = tSweet.getBoundingClientRect();
                const heartRect = tHeart.getBoundingClientRect();

                const heartCenter = heartRect.left + heartRect.width / 2;
                const sweetStart = sweetRect.left;
                const sweetEnd = sweetRect.left + sweetRect.width;

                let msg;
                if (heartCenter >= sweetStart && heartCenter <= sweetEnd) {
                    msg = "Perfect timing! You landed right in the sweet spot ‚Äî exactly where my heart lives now, with you. üíò";
                } else if (heartCenter >= sweetStart - sweetRect.width &&
                    heartCenter <= sweetEnd + sweetRect.width) {
                    msg = "Almost perfect! You brushed past the sweet spot ‚Äî just like how you brushed past my life and somehow stayed. üíñ";
                } else {
                    msg = "You missed the zone this time, but honestly? My heart has already stopped at your name anyway. üíó";
                }

                tResult.textContent = msg;
                tBtn.textContent = "Play again üîÅ";
            }

            // Button: first click = start, next click = stop, then restart
            if (tBtn && tBar && tHeart && tSweet) {
                tBtn.addEventListener('click', () => {
                    if (!tRunning) {
                        timingStart();
                    } else {
                        timingStop();
                    }
                });
            }


        </script>
